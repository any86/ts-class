# ä¸º Vue3 å­¦ç‚¹ TypeScript, ä»€ä¹ˆæ˜¯å£°æ˜æ–‡ä»¶(declare)?

## ç›´è¾¾
[ç¬¬ä¸€è¯¾, ä½“éªŒtypescript](https://juejin.im/post/5d19ad6de51d451063431864)

[ç¬¬äºŒè¯¾, åŸºç¡€ç±»å‹å’Œå…¥é—¨é«˜çº§ç±»å‹](https://juejin.im/post/5d1af3426fb9a07ed4411a9b)

[ç¬¬ä¸‰è¯¾, ä»€ä¹ˆæ˜¯æ³›å‹?](https://juejin.im/post/5d27f160e51d45108223fcf9)

[ç¬¬å››è¯¾, è§£è¯»é«˜çº§ç±»å‹](https://juejin.im/post/5d3fe80fe51d456206115987)

[ç¬¬äº”è¯¾, å‘½åç©ºé—´(namespace)æ˜¯ä»€ä¹ˆ?](https://juejin.im/post/5d5d04dfe51d4561af16dd24)

## ä»€ä¹ˆæ˜¯å£°æ˜æ–‡ä»¶?
ä¸€å¥è¯æ¦‚æ‹¬ä¸‹: **å£°æ˜æ–‡ä»¶å°±æ˜¯ç»™æ²¡æœ‰å£°æ˜çš„jsä»£ç è¡¥å……ç±»å‹æ ‡æ³¨**. å£°æ˜å˜é‡ä½¿ç”¨å…³é”®å­—`declare`æ¥è¡¨ç¤ºå…¶åé¢çš„ç±»å‹æ˜¯**å…¨å±€**çš„, æ¯”å¦‚:
``` typescript
// packages/global.d.ts
declare var __DEV__: boolean
declare var __TEST__: boolean
declare var __BROWSER__: boolean
declare var __RUNTIME_COMPILE__: boolean
declare var __COMMIT__: string
declare var __VERSION__: string
```

çœ‹è¿‡vue3æºç çš„åŒå­¦ä¸€å®šçŸ¥é“è¿™äº›æ˜¯vueä¸­çš„å˜é‡, ä¸Šé¢ä»£ç è¡¨ç¤º`__DEV__`ç­‰å˜é‡æ˜¯å…¨å±€, å¹¶ä¸”æ ‡æ³¨äº†ä»–ä»¬çš„ç±»å‹. è¿™æ ·æ— è®ºåœ¨é¡¹ç›®ä¸­çš„å“ªä¸ªtsæ–‡ä»¶ä¸­ä½¿ç”¨`__DEV__`, tsç¼–è¯‘å™¨éƒ½ä¼šçŸ¥é“ä»–æ˜¯`boolean`ç±»å‹.

## å£°æ˜æ–‡ä»¶åœ¨å“ªé‡Œ?
é¦–å…ˆå£°æ˜æ–‡ä»¶çš„æ–‡ä»¶åæ˜¯æœ‰è§„èŒƒè¦æ±‚çš„, å¿…é¡»ä»¥`.d.ts`ç»“å°¾, çœ‹äº†ä¸Šé¢çš„ä»£ç ä½ è‚¯å®šæƒ³ç»ƒä¹ å†™ä¸‹å£°æ˜æ–‡ä»¶, ä½†æ˜¯ä½ å¯èƒ½æƒ³é—®äº†"**å†™å®Œæ”¾åœ¨é‚£é‡Œ**", ç»è¿‡æˆ‘æµ‹è¯•å£°æ˜æ–‡ä»¶æ”¾åœ¨é¡¹ç›®é‡Œçš„ä»»æ„ä½ç½®,

## ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨?
å½“ä½ åœ¨tsä¸­å¼•å…¥jsä»£ç çš„æ—¶å€™, æ¯”å¦‚åœ¨tsä¸­å¼•å…¥ä¸€ä¸ªæ²¡æœ‰å£°æ˜æ–‡ä»¶çš„jssdk. ğŸš€ å…¶å®æˆ‘ä»¬åœ¨npmä¸Šå®‰è£…çš„åŒ…éƒ½æ˜¯jsæ–‡ä»¶çš„, åªæ˜¯å¤§éƒ¨åˆ†ä½œè€…éƒ½æä¾›äº†å£°æ˜æ–‡ä»¶(xx.d.ts), è¿™æ ·å¼•å…¥åˆ°ä½ çš„tsä»£ç ä¸­ä¼šè‡ªåŠ¨å¯»æ‰¾å¯¹åº”çš„å£°æ˜æ–‡ä»¶

## æ²¡æœ‰å£°æ˜æ–‡ä»¶ä¼šæ€ä¹ˆæ ·?
ç”¨`jquery`ä¸¾ä¾‹:

![](https://ws1.sinaimg.cn/large/005IQkzXly1g6cuoso4iyj30ov08bjt6.jpg)

ç³»ç»Ÿæç¤ºä»–æ‰¾ä¸åˆ°`jq`çš„å£°æ˜æ–‡ä»¶, ä¹Ÿå°±ä¸çŸ¥é“`$`çš„ç±»å‹(éšå«$æ˜¯`any`ç±»å‹), è¿™ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨`tsconfig`ä¸­å¼€å¯äº†"anyæŠ¥è­¦"(noImplicitAny:trueå’Œstrict:true), å½“ç„¶ä½ å¯ä»¥å…³é—­ä»–ä»¬, ä½†æ˜¯ä½ è‡ªå·±çš„tsä»£ç å†™çš„ç±»å‹æ ‡æ³¨ä¹Ÿå°±æ²¡æ„ä¹‰äº†.

## å£°æ˜æ–‡ä»¶å¯¹çº¯jsé¡¹ç›®æœ‰ä»€ä¹ˆå¸®åŠ©?
å¦‚æœä½ ç”¨çš„æ˜¯**vscode**, é‚£ä¹ˆä»–ä¼šè‡ªåŠ¨åˆ†æjsä»£ç , å¦‚æœå­˜åœ¨å¯¹åº”çš„å£°æ˜æ–‡ä»¶, vscodeä¼šæŠŠå£°æ˜æ–‡ä»¶çš„å†…å®¹ä½œä¸ºä»£ç æç¤º.
æ¯”å¦‚`three.js`åœ¨å®‰è£…äº†å£°æ˜æ–‡ä»¶å:


## æˆ‘ä»¬å»å“ªé‡Œæ‰¾å·²ç»å†™å¥½çš„å£°æ˜æ–‡ä»¶?(@types)
å£°æ˜æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯ä»¥`.d.ts`ç»“å°¾, æ¯”å¦‚jquery.d.ts, ä¸€èˆ¬æ¯”è¾ƒå¤§ç‰Œçš„ç¬¬ä¸‰æ–¹jsæ’ä»¶åœ¨npmä¸Šéƒ½æœ‰å¯¹åº”çš„å£°æ˜æ–‡ä»¶, æ¯”å¦‚jqueryçš„å£°æ˜æ–‡ä»¶å°±å¯ä»¥åœ¨npmä¸Šä¸‹è½½:
```shell
npm i @types/jquery
```

`npm i @types/jquery`ä¸­çš„jqueryå¯ä»¥æ¢æˆä»»æ„jsåº“çš„åå­—, å½“ç„¶**å‰ææ˜¯æœ‰äººå†™äº†å¯¹åº”çš„å£°æ˜æ–‡ä»¶å‘å¸ƒåˆ°äº†npm**, **å®‰è£…å**, æˆ‘ä»¬å¯ä»¥åœ¨`node_modules/@types/jquery`ä¸­çš„çœ‹åˆ°å£°æ˜æ–‡ä»¶, è¿™é‡Œæˆ‘æ‰“å¼€`mise.d.ts`æ–‡ä»¶:

![](https://ws1.sinaimg.cn/large/005IQkzXly1g6cwdl2cu9j30nl0c4412.jpg)

å¦‚æœå‰é¢çš„å‡ èŠ‚è¯¾ä½ éƒ½å­¦è¿‡äº†, ä½ ä¼šå‘ç°è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªæ–°çš„å…³é”®è¯`declare`, ä»–ç”¨æ¥è¡¨ç¤ºä»–åé¢å®šä¹‰çš„å˜é‡æ˜¯å…¨å±€å˜é‡. æ­¤å¤„ä¸å¤šè¯´, åé¢ä¼šå…·ä½“è®²åˆ°.

https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/jquery

## ä»€ä¹ˆæƒ…å†µä¸‹è¦è‡ªå·±å†™å£°æ˜æ–‡ä»¶?(jssdk)
è¿˜è®°å¾—æˆ‘åˆšæ‰è¯´é€šè¿‡npmå®‰è£…å£°æ˜æ–‡ä»¶çš„å‰ææ˜¯"æœ‰äººå†™äº†å¯¹åº”çš„å£°æ˜æ–‡ä»¶å‘å¸ƒåˆ°äº†npm", ä½†æ˜¯æœ‰æ—¶å€™ä½ å¼•å…¥çš„jsåº“(æ¯”å¦‚æ”¯ä»˜ç±»sdkå’Œä¸€äº›jså†™çš„jqç‰¹æ•ˆæ’ä»¶)å¹¶æ²¡æœ‰å£°æ˜æ–‡ä»¶, ä½†æ˜¯æŠŠä½ è¿˜å¿…é¡»å¼•å…¥è¿™ä¸ªåº“, é‚£æ²¡åŠæ³•äº†è‡ªå·±å†™å§!


## å¦‚ä½•å†™å£°æ˜æ–‡ä»¶?(7ä¸ªæ¨¡æ¿)
é¦–å…ˆçœ‹è¿‡tsæ–‡æ¡£çš„åŒå­¦åº”è¯¥çŸ¥é“tsç»™å‡ºäº†7ç§ä¹¦å†™å£°æ˜çš„æ¨¡æ¿:
- global-modifying-module.d.ts
- global-plugin.d.ts
- global.d.ts
- module-class.d.ts
- module-function.d.ts
- module-plugin.d.ts
- module.d.ts

è¿™å‡ ä¸ªæ¨¡æ¿å†™çš„å¾ˆè¯¦ç»†äº†, ä½†æ˜¯å¾ˆå¯æƒœåœ¨ç½‘ä¸Šæ˜¯æ²¡æœ‰ä¸­æ–‡è§£é‡Š, æ‰€ä»¥ä¸‹é¢æˆ‘ç»™å¤§å®¶è§£é‡Šä¸‹æ¯ä¸ªæ¨¡æ¿**åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ç”¨**.

### global-modifying-module.d.ts (å£°æ˜ä¿®æ”¹å…¨å±€ç±»å‹)

å…¶å®æˆ‘ä»¬å®‰è£…å®Œt**ypescript**, ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬å®‰è£…ä¸€äº›ç³»ç»Ÿå˜é‡çš„å£°æ˜æ–‡ä»¶, å­˜åœ¨`node_modules/typescript/lib`ä¸‹.

![](https://ws1.sinaimg.cn/large/005IQkzXly1g6odnyt5bjj30a30e3tac.jpg)

å¦‚æœä½ è¦ä¿®æ”¹**å·²å­˜åœ¨**çš„å…¨å±€å˜é‡çš„å£°æ˜å¯ä»¥è¿™ä¹ˆå†™, ä¸‹é¢ç”¨nodeä¸‹çš„`global`ä¸¾ä¾‹,
```typescript
declare global {
    interface String {
        hump(input: string): string;
    }
}
// æ³¨æ„: ä¿®æ”¹"å…¨å±€å£°æ˜"å¿…é¡»åœ¨æ¨¡å—å†…éƒ¨, æ‰€ä»¥è‡³å°‘è¦æœ‰ export{}å­—æ ·
// ä¸ç„¶ä¼šæŠ¥é”™âŒ: å…¨å±€èŒƒå›´çš„æ‰©å¤§ä»…å¯ç›´æ¥åµŒå¥—åœ¨å¤–éƒ¨æ¨¡å—ä¸­æˆ–ç¯å¢ƒæ¨¡å—å£°æ˜ä¸­
export {}
```

ç°åœ¨`String`ç±»å‹åœ¨vscodeçš„è¯­æ³•æç¤ºä¸‹å¤šäº†ä¸€ä¸ª`hump`çš„æ–¹æ³•,ä¸è¿‡æˆ‘ä»¬åªæ˜¯å£°æ˜, å¹¶æ²¡æœ‰ç”¨jså®ç°, æ‰€ä»¥è¿è¡Œä¼šæŠ¥é”™, æ‰€ä»¥ä¸è¦å¿˜äº†å†™jsçš„å®ç°éƒ¨åˆ†å“¦.

![1.png](http://ww1.sinaimg.cn/large/005IQkzXly1g8v8u5lbjvj30b103ot8t.jpg)


### global-plugin.d.ts (å£°æ˜åœ¨å…¨å±€ç±»å‹ä¸‹å¢åŠ ç±»å‹)

```typescript
declare namespace MyPlugin {
    interface sayHello {
        (string)=>string
    }
}
```

## ä»€ä¹ˆæ—¶å€™è¦å†™å£°æ˜æ–‡ä»¶?

## å†™å¥½äº†æ”¾åœ¨å“ªé‡Œ?

## æ€ä¹ˆå†™å£°æ˜æ–‡ä»¶?
package.jsonä¸­çš„typeså­—æ®µ

## JQueryçš„ç”³æ˜æ–‡ä»¶æ˜¯æ€ä¹ˆæ ·çš„?
jqçš„å£°æ˜æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ª`JQueryStatic.d.ts`, åœ¨å…¶ä¸­ä»–

### å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡
```typescript
// è¿™æ ·tså°±çŸ¥é“æœ‰ä¸€ä¸ªå…¨å±€å˜é‡`n`, ä»–æ˜¯`number`ç±»å‹;
declare var n:number;
n=123


```



## å¦‚ä½•å¼•å…¥å£°æ˜æ–‡ä»¶?
```typescript
<reference types="JQuery.d.ts" />
```

## æœ‰ä»€ä¹ˆè¦æ³¨æ„çš„?

## æ€»ç»“
å¤šå†™å¤šç»ƒ, å¾ˆå¿«å°±ä¸Šæ‰‹, æ”¾å‡ ä¸ªæˆ‘ç”¨tså†™çš„é¡¹ç›®å½“åšå‚è€ƒ, æŠ›ç –å¼•ç‰, åŠ æ²¹!

æ‰‹åŠ¿åº“: https://github.com/any86/any-touch

å‘½ä»¤å¼è°ƒç”¨vueç»„ä»¶: https://github.com/any86/vue-create-root

å·¥ä½œä¸­å¸¸ç”¨çš„ä¸€äº›ä»£ç ç‰‡æ®µ: https://github.com/any86/useful-utils

ä¸€ä¸ªminiçš„äº‹ä»¶ç®¡ç†å™¨: https://github.com/any86/any-event