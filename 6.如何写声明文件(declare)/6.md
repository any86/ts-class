# ä¸º Vue3 å­¦ç‚¹ TypeScript, ä»€ä¹ˆæ˜¯å£°æ˜æ–‡ä»¶(declare)? [ğŸ¦•å…¨å±€å£°æ˜ç¯‡]

## ç›´è¾¾
[ç¬¬ä¸€è¯¾, ä½“éªŒtypescript](https://juejin.im/post/5d19ad6de51d451063431864)

[ç¬¬äºŒè¯¾, åŸºç¡€ç±»å‹å’Œå…¥é—¨é«˜çº§ç±»å‹](https://juejin.im/post/5d1af3426fb9a07ed4411a9b)

[ç¬¬ä¸‰è¯¾, ä»€ä¹ˆæ˜¯æ³›å‹?](https://juejin.im/post/5d27f160e51d45108223fcf9)

[ç¬¬å››è¯¾, è§£è¯»é«˜çº§ç±»å‹](https://juejin.im/post/5d3fe80fe51d456206115987)

[ç¬¬äº”è¯¾, å‘½åç©ºé—´(namespace)æ˜¯ä»€ä¹ˆ?](https://juejin.im/post/5d5d04dfe51d4561af16dd24)

## å…¨å±€å£°æ˜ç¯‡
å¹´åº•æ¯”è¾ƒå¿™, å—ä¸ªäººæ—¶é—´é™åˆ¶, æš‚æŠŠ"å£°æ˜"éƒ¨åˆ†çš„å†…å®¹åˆ†ä¸º"**å…¨å±€å£°æ˜ç¯‡**"å’Œ"**æ¨¡å—å£°æ˜ç¯‡**", è¿˜è¯·å¤šå¤šåŒ…æ¶µ, æœ¬æ¬¡å…ˆè¯´"**å…¨å±€**".

## ä»€ä¹ˆæ˜¯å£°æ˜æ–‡ä»¶?
**å£°æ˜æ–‡ä»¶å°±æ˜¯ç»™jsä»£ç è¡¥å……ç±»å‹æ ‡æ³¨**. è¿™æ ·åœ¨tsç¼–è¯‘ç¯å¢ƒä¸‹å°±ä¸ä¼šæç¤ºjsæ–‡ä»¶"ç¼ºå°‘ç±»å‹".

å£°æ˜å˜é‡ä½¿ç”¨å…³é”®å­—`declare`æ¥è¡¨ç¤ºå…¶åé¢çš„ç±»å‹æ˜¯**å…¨å±€**çš„, æ¯”å¦‚:

``` typescript
// packages/global.d.ts
declare var __DEV__: boolean
declare var __TEST__: boolean
declare var __BROWSER__: boolean
declare var __RUNTIME_COMPILE__: boolean
declare var __COMMIT__: string
declare var __VERSION__: string
```

çœ‹è¿‡vue3æºç çš„åŒå­¦ä¸€å®šçŸ¥é“è¿™äº›æ˜¯vueä¸­çš„å˜é‡, ä¸Šé¢ä»£ç è¡¨ç¤º`__DEV__`ç­‰å˜é‡æ˜¯å…¨å±€, å¹¶ä¸”æ ‡æ³¨äº†ä»–ä»¬çš„ç±»å‹. è¿™æ ·æ— è®ºåœ¨é¡¹ç›®ä¸­çš„å“ªä¸ªtsæ–‡ä»¶ä¸­ä½¿ç”¨`__DEV__`, å˜é‡tsç¼–è¯‘å™¨éƒ½ä¼šçŸ¥é“ä»–æ˜¯`boolean`ç±»å‹.

## å£°æ˜æ–‡ä»¶åœ¨å“ªé‡Œ?
é¦–å…ˆå£°æ˜æ–‡ä»¶çš„æ–‡ä»¶åæ˜¯æœ‰è§„èŒƒè¦æ±‚çš„, å¿…é¡»ä»¥`.d.ts`ç»“å°¾, çœ‹äº†ä¸Šé¢çš„ä»£ç ä½ è‚¯å®šæƒ³ç»ƒä¹ å†™ä¸‹å£°æ˜æ–‡ä»¶, ä½†æ˜¯ä½ å¯èƒ½æƒ³é—®äº†"**å†™å®Œæ”¾åœ¨å“ªé‡Œ**", ç½‘ä¸Šè¯´å£°æ˜æ–‡ä»¶æ”¾åœ¨é¡¹ç›®é‡Œçš„**ä»»æ„è·¯å¾„\/æ–‡ä»¶å**éƒ½å¯ä»¥è¢«tsç¼–è¯‘å™¨è¯†åˆ«, ä½†å®é™…å¼€å‘ä¸­å‘ç°, ä¸ºäº†è§„é¿ä¸€äº›å¥‡æ€ªçš„é—®é¢˜, **æ¨èæ”¾åœ¨æ ¹ç›®å½•ä¸‹**.

![1.png](http://ww1.sinaimg.cn/large/005IQkzXgy1g8wewoouegj30a307l3yz.jpg)



## åˆ«äººå†™å¥½çš„å£°æ˜æ–‡ä»¶( @types/xxx )
ä¸€èˆ¬æ¯”è¾ƒå¤§ç‰Œçš„ç¬¬ä¸‰æ–¹jsæ’ä»¶åœ¨npmä¸Šéƒ½æœ‰å¯¹åº”çš„å£°æ˜æ–‡ä»¶, æ¯”å¦‚jqueryçš„å£°æ˜æ–‡ä»¶å°±å¯ä»¥åœ¨npmä¸Šä¸‹è½½:
```shell
npm i @types/jquery
```

`npm i @types/jquery`ä¸­çš„jqueryå¯ä»¥æ¢æˆä»»æ„jsåº“çš„åå­—, å½“ç„¶**å‰ææ˜¯æœ‰äººå†™äº†å¯¹åº”çš„å£°æ˜æ–‡ä»¶å‘å¸ƒåˆ°äº†npm**.

 **å®‰è£…å**, æˆ‘ä»¬å¯ä»¥åœ¨`node_modules/@types/jquery`ä¸­çš„çœ‹åˆ°å£°æ˜æ–‡ä»¶, è¿™é‡Œæˆ‘æ‰“å¼€`mise.d.ts`æ–‡ä»¶:

![](https://ws1.sinaimg.cn/large/005IQkzXly1g6cwdl2cu9j30nl0c4412.jpg)

## å£°æ˜æ–‡ä»¶å¯¹çº¯jsé¡¹ç›®æœ‰ä»€ä¹ˆå¸®åŠ©?
å³ä¾¿ä½ åªå†™jsä»£ç , ä¹Ÿå¯ä»¥å®‰è£…å£°æ˜æ–‡ä»¶, å› ä¸ºå¦‚æœä½ ç”¨çš„æ˜¯**vscode**, é‚£ä¹ˆä»–ä¼šè‡ªåŠ¨åˆ†æjsä»£ç , å¦‚æœå­˜åœ¨å¯¹åº”çš„å£°æ˜æ–‡ä»¶, vscodeä¼šæŠŠå£°æ˜æ–‡ä»¶çš„å†…å®¹ä½œä¸º**ä»£ç æç¤º**.

`jquery`åœ¨å®‰è£…äº†å£°æ˜æ–‡ä»¶å

![1.png](http://ww1.sinaimg.cn/large/005IQkzXly1g8wf66t9bpj30m60altag.jpg)

## ä»€ä¹ˆæƒ…å†µä¸‹è¦è‡ªå·±å†™å£°æ˜æ–‡ä»¶?
å¦‚æœ"@types/"ä¸‹æ‰¾ä¸åˆ°å£°æ˜æ–‡ä»¶, é‚£ä¹ˆå°±éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹å†™äº†.

## å¦‚ä½•å†™å£°æ˜æ–‡ä»¶?

å£°æ˜æ–‡ä»¶åˆ†2å¤§ç±», ä¸€ç±»æ˜¯å…¨å±€å£°æ˜, ä¸€ç±»æ˜¯å¯¹æ¨¡å—çš„å£°æ˜. è¿™èŠ‚åªè¯´"å…¨å±€".

### å…¨å±€å£°æ˜
é€šè¿‡`declare`æˆ‘ä»¬å¯ä»¥æ ‡æ³¨jså…¨å±€å˜é‡çš„ç±»å‹.

#### ç®€å•åº”ç”¨
```typescript
// global.d.ts
declare var n: number;
declare let s: string;
declare const o: object;
declare function f(s: string): number;
declare enum dir {
    top,
    right,
    bottom,
    left
}
```

å£°æ˜ä¹‹å,æˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»æ„æ–‡ä»¶ä¸­ç›´æ¥æ“ä½œå˜é‡:
```typescript
n = 321
s = 'æ–‡å­—'
let o1 = o;
f('123').toFixed();
dir.bottom.toFixed();

// æŠ¥é”™
n = '312'
s = 123
```

#### declare namespace
è¿™ä¸ª`namespace`ä»£è¡¨åé¢çš„å…¨å±€å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡:
```typescript
// global.d.ts
declare namespace MyPlugin {
    var n:number;
    var s:string;
    var f:(s:string)=>number;
}
```

```typescript
MyPlugin.s.substr(0,1);
MyPlugin.n.toFixed();
MyPlugin.f('æ–‡å­—').toFixed();

// æŠ¥é”™
MyPlugin.s.toFixed();
MyPlugin.n.substr(0,1);
MyPlugin.f(123);
```

#### ä¿®æ”¹å·²å­˜åœ¨çš„å…¨å±€å£°æ˜
å…¶å®æˆ‘ä»¬å®‰è£…å®Œt**ypescript**, ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬å®‰è£…ä¸€äº›ç³»ç»Ÿå˜é‡çš„å£°æ˜æ–‡ä»¶, å­˜åœ¨`node_modules/typescript/lib`ä¸‹.

![](https://ws1.sinaimg.cn/large/005IQkzXly1g6odnyt5bjj30a30e3tac.jpg)

å¦‚æœä½ è¦ä¿®æ”¹**å·²å­˜åœ¨**çš„å…¨å±€å˜é‡çš„å£°æ˜å¯ä»¥è¿™ä¹ˆå†™, ä¸‹é¢ç”¨nodeä¸‹çš„`global`ä¸¾ä¾‹,
```typescript
declare global {
    interface String {
        hump(input: string): string;
    }
}
// æ³¨æ„: ä¿®æ”¹"å…¨å±€å£°æ˜"å¿…é¡»åœ¨æ¨¡å—å†…éƒ¨, æ‰€ä»¥è‡³å°‘è¦æœ‰ export{}å­—æ ·
// ä¸ç„¶ä¼šæŠ¥é”™âŒ: å…¨å±€èŒƒå›´çš„æ‰©å¤§ä»…å¯ç›´æ¥åµŒå¥—åœ¨å¤–éƒ¨æ¨¡å—ä¸­æˆ–ç¯å¢ƒæ¨¡å—å£°æ˜ä¸­
export {}
```

ç°åœ¨`String`ç±»å‹åœ¨vscodeçš„è¯­æ³•æç¤ºä¸‹å¤šäº†ä¸€ä¸ª`hump`çš„æ–¹æ³•,ä¸è¿‡æˆ‘ä»¬åªæ˜¯å£°æ˜, å¹¶æ²¡æœ‰ç”¨jså®ç°, æ‰€ä»¥è¿è¡Œä¼šæŠ¥é”™, æ‰€ä»¥ä¸è¦å¿˜äº†å†™jsçš„å®ç°éƒ¨åˆ†å“¦.

![1.png](http://ww1.sinaimg.cn/large/005IQkzXly1g8v8u5lbjvj30b103ot8t.jpg)


## æ€»ç»“
å¹´åº•çœŸçš„æ˜¯æ¯”è¾ƒå¿™, ä½†æ˜¯ä¹‹å‰ç­”åº”äº†æ›´æ–°tsçš„å†…å®¹, æ‰€ä»¥åªèƒ½ä¸€æ­¥æ­¥å®Œæˆ"å£°æ˜"éƒ¨åˆ†çš„å†…å®¹, è¿˜è¯·è§è°…ğŸ‘·.

å¤šå†™å¤šç»ƒ, å¾ˆå¿«å°±ä¸Šæ‰‹, æ”¾å‡ ä¸ªæˆ‘ç»ƒä¹ typescriptçš„é¡¹ç›®å½“åšå‚è€ƒ, æŠ›ç –å¼•ç‰, åŠ æ²¹!

âœ‹ æ‰‹åŠ¿åº“, æ”¯æŒtap/pan/swipe/rotate/pinch/press: https://github.com/any86/any-touch

ğŸ­ æŠŠvueç»„ä»¶å˜æˆthis.$xx()è¿™ç§å‘½ä»¤: https://github.com/any86/vue-create-root